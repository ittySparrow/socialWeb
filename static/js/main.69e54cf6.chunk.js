(this.webpackJsonplittlespar=this.webpackJsonplittlespar||[]).push([[0],{11:function(e,t,a){e.exports={navbar:"NavBar_navbar__g2qiZ",item:"NavBar_item__3HH8z",active:"NavBar_active__sMGe0"}},14:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__3AkNo",dialogItems:"Dialogs_dialogItems__3bCkw",active:"Dialogs_active__2apcq",avatar:"Dialogs_avatar__1y1hG",messages:"Dialogs_messages__2z8mu",dialog:"Dialogs_dialog__3SPou",dialogItem:"Dialogs_dialogItem__2nrUU"}},24:function(e,t,a){"use strict";var n=a(0),r=a.n(n),u=a(53),s=a.n(u);t.a=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:s.a}))}},27:function(e,t,a){e.exports={formControl:"FormControls_formControl__1IqeD",error:"FormControls_error__1VYdL"}},36:function(e,t,a){e.exports={header:"Header_header__2FXRx",loginBlock:"Header_loginBlock__1XxOS"}},47:function(e,t,a){"use strict";a.d(t,"e",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"c",(function(){return g})),a.d(t,"b",(function(){return E})),a.d(t,"g",(function(){return b}));var n=a(23),r=a(2),u=a(3),s=a.n(u),i=a(13),c=a(9),o="usersReducer/TOGGLE_FOLLOW",l="usersReducer/SET_USERS",m=function(e){return{type:o,userId:e}},d=function(e){return{type:"usersReducer/SET_CURRENT_PAGE",page:e}},f=function(e){return{type:"usersReducer/TOGGLE_IS_FETCHING",isFetching:e}},p=function(e,t){return{type:"usersReducer/TOGGLE_FOLLOWING_IN_PROGRESS",isFetching:e,userId:t}},g=function(e,t){return function(){var a=Object(i.a)(s.a.mark((function a(n){var r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(f(!0)),a.next=3,c.d.getUsers(e,t);case 3:r=a.sent,n(f(!1)),n((u=r.items,{type:l,users:u})),n({type:"usersReducer/SET_TOTAL_USERS_COUNT",totalUsersCount:r.totalCount});case 7:case"end":return a.stop()}var u}),a)})));return function(e){return a.apply(this,arguments)}}()},v=function(e,t){return function(){var a=Object(i.a)(s.a.mark((function a(n){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(p(!0,e)),a.next=3,t(e);case 3:0===a.sent&&(n(m(e)),n(p(!1,e)));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},E=function(e){return v(e,c.b.follow)},b=function(e){return v(e,c.b.unfollow)},h={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(r.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(r.a)({},e,{followed:!e.followed}):e}))});case l:return Object(r.a)({},e,{users:t.users});case"usersReducer/SET_CURRENT_PAGE":return Object(r.a)({},e,{currentPage:t.page});case"usersReducer/SET_TOTAL_USERS_COUNT":return Object(r.a)({},e,{totalUsersCount:t.totalUsersCount});case"usersReducer/TOGGLE_IS_FETCHING":return Object(r.a)({},e,{isFetching:t.isFetching});case"usersReducer/TOGGLE_FOLLOWING_IN_PROGRESS":return Object(r.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(n.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},53:function(e,t,a){e.exports=a.p+"static/media/loadingImg.da69f7d1.svg"},54:function(e,t,a){e.exports={posts:"MyPosts_posts__3_PLa"}},55:function(e,t,a){e.exports=a.p+"static/media/logo.a3fedab4.png"},56:function(e,t,a){e.exports=a(89)},58:function(e,t,a){},81:function(e,t,a){},86:function(e,t,a){e.exports={sidebar:"SideBar_sidebar__A3uUc"}},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),u=(a(58),a(12)),s=a(23),i=a(2),c=a(3),o=a.n(c),l=a(13),m=a(9),d="profileReducer/ADD_POST",f="profileReducer/DELETE_POST",p="profileReducer/SET_STATUS",g=function(e){return{type:p,status:e}},v={postsData:[{id:1,post:"Hello, this is my first post",likesCount:3},{id:2,post:"Is anybody here?",likesCount:9}],profile:null,status:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var a={id:5,post:t.text,likesCount:0};return Object(i.a)({},e,{postsData:[].concat(Object(s.a)(e.postsData),[a])});case"profileReducer/SET_USER_PROFILE":return Object(i.a)({},e,{profile:t.profile});case p:return Object(i.a)({},e,{status:t.status});case f:return Object(i.a)({},e,{postsData:e.postsData.filter((function(e){return e.id!==t.id}))});default:return e}},b="dialogsReducer/ADD-NEW-MESSAGE",h={dialogsData:[{id:1,name:"Darja"},{id:2,name:"Sergei"},{id:3,name:"Sveta"},{id:4,name:"Andrey"},{id:5,name:"Alex"}],messagesData:[{id:1,message:"Hello, my brave girl."},{id:2,message:"Let's do it, girl."},{id:3,message:"You can do it, I promise."}]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var a={id:3,message:t.text};return Object(i.a)({},e,{messagesData:[].concat(Object(s.a)(e.messagesData),[a])});default:return e}},O={friendList:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;arguments.length>1&&arguments[1];return e},j=a(47),w=function(e,t,a,n){return{type:"authReducer/SET_AUTH_USER_DATA",payload:{id:e,login:t,email:a,isAuth:n}}},N=function(){return function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getUserData();case 2:0===(a=e.sent).resultCode&&(n=a.data,r=n.id,u=n.login,s=n.email,t(w(r,u,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y={id:null,login:null,email:null,isAuth:!1},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"authReducer/SET_AUTH_USER_DATA":return Object(i.a)({},e,{},t.payload);default:return e}},I=a(50),D={initialized:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"appReducer/INITIALIZED_SUCCESS":return Object(i.a)({},e,{initialized:!0});default:return e}},T=Object(u.c)({profilePage:E,messagesPage:_,sidebar:S,usersPage:j.a,auth:C,app:P}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,x=Object(u.e)(T,R(Object(u.a)(I.a))),A=a(28),U=a.n(A),k=a(17),L=a(18),M=a(20),G=a(19),F=(a(81),a(11)),z=a.n(F),H=a(5),B=function(){return r.a.createElement("nav",{className:z.a.navbar},r.a.createElement("div",{className:z.a.item},r.a.createElement(H.b,{to:"/profile",activeClassName:z.a.active},"Profile")),r.a.createElement("div",{className:z.a.item},r.a.createElement(H.b,{to:"/dialogs",activeClassName:z.a.active},"Messages")),r.a.createElement("div",{className:z.a.item},r.a.createElement(H.b,{to:"/users",activeClassName:z.a.active},"Users")),r.a.createElement("div",{className:z.a.item},r.a.createElement(H.b,{to:"/music",activeClassName:z.a.active},"Music")),r.a.createElement("div",{className:z.a.item},r.a.createElement(H.b,{to:"/settings",activeClassName:z.a.active},"Settings")))},q=function(e){var t=e.friendList.map((function(e){var t=e.imgUrl,a=e.name;return r.a.createElement("div",{className:"friend"},r.a.createElement("img",{alt:"",src:t}),a)}));return r.a.createElement("div",{className:"friendList"},t)},W=(a(86),a(4)),X=Object(W.b)((function(e){return{friendList:e.sidebar.friendList}}))(q),Y=a(21),Z=a(14),J=a.n(Z),V=function(e){var t=e.id,a=e.name,n=e.imgUrl,u="/dialogs/"+t;return r.a.createElement("div",{className:J.a.dialog},r.a.createElement("img",{className:J.a.avatar,src:n}),r.a.createElement(H.b,{to:u,className:J.a.dialogItem,activeClassName:J.a.active},a))},K=function(e){var t=e.message;return r.a.createElement("div",null,r.a.createElement("div",{className:J.a.message},t))},Q=a(15),$=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},ee=function(e){if(!e)return"Field is required"},te=function(e){return function(t){if(t.length>e)return"Maximum length is ".concat(e," symbols")}},ae=a(37),ne=a(27),re=a.n(ne),ue=function(e){var t=e.input,a=e.meta,n=Object(ae.a)(e,["input","meta"]),u=a.touched&&"Field is required"!==a.error;return r.a.createElement("div",{className:re.a.formControl+" "+(u?re.a.error:"")},r.a.createElement("div",null,r.a.createElement("textarea",Object.assign({},t,n))),u&&r.a.createElement("span",null,a.error))},se=function(e){var t=e.input,a=e.meta,n=Object(ae.a)(e,["input","meta"]),u=a.touched&&a.error;return r.a.createElement("div",{className:re.a.formControl+" "+(u?re.a.error:"")},r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,n))),u&&r.a.createElement("span",null,a.error))},ie=te(100),ce=function(e){var t=e.addNewMessage;return r.a.createElement(Q.b,{onSubmit:function(e){var a=e.newMessage;t(a)},render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(Q.a,{component:ue,name:"newMessage",placeholder:"New Message",validate:$(ee,ie)})),r.a.createElement("div",null,r.a.createElement("button",null,"Send message")))}})},oe=function(e){return{isAuth:e.auth.isAuth}},le=function(e){var t=function(t){Object(M.a)(n,t);var a=Object(G.a)(n);function n(){return Object(k.a)(this,n),a.apply(this,arguments)}return Object(L.a)(n,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(Y.a,{to:"/login"})}}]),n}(r.a.Component);return Object(W.b)(oe)(t)},me=Object(u.d)(Object(W.b)((function(e){var t=e.messagesPage;return{newMessageText:t.newMessageText,dialogsData:t.dialogsData,messagesData:t.messagesData}}),{addNewMessage:function(e){return{type:b,text:e}}}),le)((function(e){var t=e.dialogsData,a=e.messagesData,n=e.addNewMessage,u=t.map((function(e){var t=e.id,a=e.name;return r.a.createElement(V,{name:a,id:t})})),s=a.map((function(e){var t=e.message;return r.a.createElement(K,{message:t})}));return r.a.createElement("div",{className:J.a.dialogs},r.a.createElement("div",{className:J.a.dialogItems},u),r.a.createElement("div",{className:J.a.messages},r.a.createElement("div",null,s),r.a.createElement(ce,{addNewMessage:n})))})),de=(a(87),a(24)),fe=a(32),pe=function(e){var t=Object(n.useState)(!1),a=Object(fe.a)(t,2),u=a[0],s=a[1],i=Object(n.useState)(e.status),c=Object(fe.a)(i,2),o=c[0],l=c[1];Object(n.useEffect)((function(){l(e.status)}),[e.status]);return r.a.createElement("div",null,u?r.a.createElement("input",{onChange:function(e){l(e.target.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(o)},value:o}):r.a.createElement("span",{onDoubleClick:function(){s(!0)}},e.status||"..."))},ge=function(e){var t=e.profile,a=e.status,n=e.updateStatus;return t?r.a.createElement("div",null,r.a.createElement("img",{src:t.photos.large}),r.a.createElement(pe,{status:a,updateStatus:n}),r.a.createElement("div",null,"ava+description")):r.a.createElement(de.a,null)},ve=a(54),Ee=a.n(ve),be=(a(88),function(e){var t=e.message,a=e.likesCount;return r.a.createElement("div",{className:"postFrame"},r.a.createElement("div",{className:"post"},t),r.a.createElement("div",{className:"likesCount"},"likes: ",a))}),he=te(30),_e=function(e){var t=e.addPost;return r.a.createElement(Q.b,{onSubmit:function(e){var a=e.newPost;t(a)},render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(Q.a,{component:ue,name:"newPost",placeholder:"New Post",validate:$(ee,he)})),r.a.createElement("div",null,r.a.createElement("button",null,"Add post")))}})},Oe=function(e){var t=e.postsData,a=e.addPost,n=t.map((function(e){var t=e.post,a=e.likesCount;return r.a.createElement(be,{message:t,likesCount:a})}));return r.a.createElement("div",{className:"posts"},r.a.createElement("h3",null,"My posts"),r.a.createElement(_e,{addPost:a}),r.a.createElement("div",{className:Ee.a.posts},n))},Se=Object(W.b)((function(e){return{postsData:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),{addPost:function(e){return{type:d,text:e}}})(Oe),je=function(e){var t=e.profile,a=e.status,n=e.updateStatus;return r.a.createElement("div",null,r.a.createElement(ge,{profile:t,status:a,updateStatus:n}),r.a.createElement(Se,null))},we=function(e){Object(M.a)(a,e);var t=Object(G.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;if(!e&&!(e=this.props.authUserId))return this.props.history.push("/login");this.props.setProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(je,this.props))}}]),a}(r.a.Component),Ne=Object(u.d)(Y.f,Object(W.b)((function(e){return{status:e.profilePage.status,profile:e.profilePage.profile,isAuth:e.auth.isAuth,authUserId:e.auth.id}}),{setProfile:function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c.getUserProfile(e);case 2:n=t.sent,a({type:"profileReducer/SET_USER_PROFILE",profile:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c.getStatus(e);case 2:n=t.sent,a(g(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c.updateStatus(e);case 2:0===t.sent.data.resultCode&&a(g(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),le)(we),ye=a(36),Ce=a.n(ye),Ie=a(55),De=a.n(Ie),Pe=function(e){var t=e.isAuth,a=e.login,n=e.logout;return r.a.createElement("header",{className:Ce.a.header},r.a.createElement("img",{src:De.a}),r.a.createElement("div",{className:Ce.a.loginBlock},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(H.b,{to:"/profile"},a),r.a.createElement("button",{onClick:n},"logout")):r.a.createElement(H.b,{to:"/login"},"Login")))},Te=function(e){Object(M.a)(a,e);var t=Object(G.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"render",value:function(){return r.a.createElement(Pe,this.props)}}]),a}(r.a.Component),Re=Object(W.b)((function(e){var t=e.auth;return{isAuth:t.isAuth,login:t.login}}),{logout:function(){return function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.logout();case 2:0===e.sent.data.resultCode&&t(w(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Te),xe=function(e){var t=e.login;return r.a.createElement(Q.b,{onSubmit:function(e){var a=e.email,n=e.password,r=e.rememberMe;t(a,n,r)},render:function(e){var t=e.submitError,a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,r.a.createElement(Q.a,{component:se,name:"email",placeholder:"Email",validate:$(ee)})),r.a.createElement("div",null,r.a.createElement(Q.a,{component:se,name:"password",type:"password",placeholder:"Password",validate:$(ee)})),t&&r.a.createElement("div",null,t),r.a.createElement("div",null,r.a.createElement(Q.a,{component:se,name:"rememberMe",type:"checkbox"}),"remember me"),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))}})},Ae=Object(W.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,a){return function(){var n=Object(l.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.login(e,t,a);case 2:0===n.sent.resultCode&&r(N());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(Y.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"LOGIN"),r.a.createElement(xe,e))})),Ue=r.a.lazy((function(){return a.e(3).then(a.bind(null,93))})),ke=function(e){Object(M.a)(a,e);var t=Object(G.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(Re,null),r.a.createElement(B,null),r.a.createElement(X,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(Y.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Ne,null)}}),r.a.createElement(Y.b,{path:"/dialogs",render:function(){return r.a.createElement(me,null)}}),r.a.createElement(Y.b,{path:"/users",component:function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement(de.a,null)},r.a.createElement(Ue,null))}}),r.a.createElement(Y.b,{path:"/login",component:function(){return r.a.createElement(Ae,null)}}))):r.a.createElement(de.a,null)}}]),a}(r.a.Component),Le=Object(W.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(N());Promise.all([t]).then((function(){return e({type:"appReducer/INITIALIZED_SUCCESS"})}))}}})(ke);U.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H.a,null,r.a.createElement(W.a,{store:x},r.a.createElement(Le,null)))),document.getElementById("root"))},9:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c}));var n=a(49),r=n.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"03606b0b-0990-4674-83db-0e28abe1bd02"}}),u={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))}},s={follow:function(e){return r.post("follow/".concat(e)).then((function(e){return e.data.resultCode}))},unfollow:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data.resultCode}))}},i={getUserData:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:a}).then((function(e){return e.data}))},logout:function(){return r.delete("auth/login")}},c={getUserProfile:function(e){return r.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return r.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return r.put("profile/status",{status:e})}}}},[[56,1,2]]]);
//# sourceMappingURL=main.69e54cf6.chunk.js.map